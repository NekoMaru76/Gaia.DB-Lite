const deleteEvent = require("./deleteEvent.js");

function emitEvent(name) {
	let args = [...arguments].slice(1);
	let e    = this[name];
	let run  = false;
	let res  = null;
	
	if (typeof name !== "string") throw new Error(`Event name can only be a string.`);
	if (e) {
		res = [];
		
		for (let i = 0; i < e.length; i++) {
			run = true;

			let ev = e[i];
			
			res.push(ev.callback.apply(null, args));
			
			if (ev.once) deleteEvent.bind({ Events: this })(ev.id);
		}
	}
	
	return res || run;
}

module.exports = emitEvent;